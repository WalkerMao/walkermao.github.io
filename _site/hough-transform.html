<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="https://kit.fontawesome.com/123ecac47c.js" crossorigin="anonymous"></script><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link href="https://fonts.googleapis.com/css?family=Merriweather:300|Raleway:400,700" rel="stylesheet">
<link rel="stylesheet" href="/assets/css/style.css">
<link rel="shortcut icon" type="image/png" href="/assets/portfolio.png">
<title>Hough Transform</title>
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Hough Transform | Weikai’s blog.</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Hough Transform" />
<meta name="author" content="Weikai Mao" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Hough transform can be used to detect any structure whose paramteric equation is known. For example, detecting lines or circles in a image. It gives a robust detector under noise and partial occlusion." />
<meta property="og:description" content="Hough transform can be used to detect any structure whose paramteric equation is known. For example, detecting lines or circles in a image. It gives a robust detector under noise and partial occlusion." />
<link rel="canonical" href="http://localhost:4000/hough-transform.html" />
<meta property="og:url" content="http://localhost:4000/hough-transform.html" />
<meta property="og:site_name" content="Weikai’s blog." />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-03-13T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Hough Transform" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Weikai Mao"},"dateModified":"2021-03-13T00:00:00+08:00","datePublished":"2021-03-13T00:00:00+08:00","description":"Hough transform can be used to detect any structure whose paramteric equation is known. For example, detecting lines or circles in a image. It gives a robust detector under noise and partial occlusion.","headline":"Hough Transform","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/hough-transform.html"},"url":"http://localhost:4000/hough-transform.html"}</script>
<!-- End Jekyll SEO tag -->


<meta name="google-site-verification" content="wXp8C1QlYKCpKxfXyFfQXEv9l5fJvcOi53ofYmOcaSA" />
<meta name="msvalidate.01" content="97F0BB32D312B808156DE357EA8474D3" />
<meta name="yandex-verification" content="690106a82d8966ab" />

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[", "\\]"] ],
        processEscapes: true,
        ignoreClass: "tex2jax_ignore|dno"
      }
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>    


  







</head>
  <body>
    <main class="container">
      <section class="about">
        <a href="/" class="iconlink"> 
          <h3> 
            <i class="fas fa-home"></i> HOME 
          </h3> 
        </a>
        <a href="/"> <img src="/assets/portfolio.png" alt="Weikai Mao"></a>
        <h2 id="title"> Weikai Mao </h2>
        <p style="font-size:90%" class="tagline">maoweikai123@outlook.com</p>
        
        <ul class="social"><a href="https://github.com/WalkerMao">
              <li>
                <i class="fab fa-github"></i>
              </li>
            </a><a href="https://www.linkedin.com/in/weikai-mao-000249124">
              <li>
                <i class="fab fa-linkedin"></i>
              </li>
            </a><a href="/wechat-qr-code.html">
              <li>
                <i class="fab fa-weixin"></i>
              </li>
            </a></ul><h3 style="color:gray; font-weight:normal"> Categories: </h3>
            <ul class="post-categories" style="max-width:225px;">
              
                  <a class="post-link" href="/"> <li style="padding: 4px 8px;"> All </li> </a>
              
                  <a class="post-link" href="/categories/cs"> <li style="padding: 4px 8px;"> CS </li> </a>
              
                  <a class="post-link" href="/categories/cv"> <li style="padding: 4px 8px;"> CV </li> </a>
              
                  <a class="post-link" href="/categories/dl"> <li style="padding: 4px 8px;"> DL </li> </a>
              
                  <a class="post-link" href="/categories/fe"> <li style="padding: 4px 8px;"> FE </li> </a>
              
                  <a class="post-link" href="/categories/math"> <li style="padding: 4px 8px;"> Math </li> </a>
              
                  <a class="post-link" href="/categories/ml"> <li style="padding: 4px 8px;"> ML </li> </a>
              
                  <a class="post-link" href="/categories/nlp"> <li style="padding: 4px 8px;"> NLP </li> </a>
              
                  <a class="post-link" href="/categories/stat"> <li style="padding: 4px 8px;"> Stat </li> </a>
              
                  <a class="post-link" href="/categories/杂"> <li style="padding: 4px 8px;"> 杂 </li> </a>
              
            </ul><p>&copy; 2023 </p>

      </section>
      <section class="content">
        <div class="sidebar">
  <ul><li><a href="#goal-of-hough-transform-for-detecting-lines">Goal of Hough Transform for Detecting Lines</a></li><li><a href="#detecting-lines-using-hough-transform-in-a-b-space">Detecting Lines Using Hough Transform in \(a, b\) Space</a></li><li><a href="#hough-transform-in-rho-theta-space">Hough Transform in \(\rho, \theta\) Space</a></li><li><a href="#accumulator-cells">Accumulator Cells</a></li><li><a href="#dealing-with-noise">Dealing with Noise</a></li><li><a href="#concluding-remarks">Concluding Remarks</a></li></ul>

</div><div class="post-container" id="viewpoint">
  <a class="post-link" href="/hough-transform.html">
    <h2 class="post-title">Hough Transform</h2>
  </a>
  <div class="post-meta">
    <div>
      <ul class="post-categories"><a class="post-link" href="/categories/cv"> <li>CV</li> </a></ul>
      <ul class="post-tags"><a class="post-link" href="/tags/traditional cv"> <li>Traditional CV</li> </a></ul>
    </div>
    <div class="post-date">
      <i class="icon-calendar"></i>
      Mar 13, 2021
    </div>
  </div>
  <div style="line-height:77%;">
    <br>
  </div>
  <div class="post"><p>Hough transform can be used to detect any structure whose paramteric equation is known. For example, detecting lines or circles in a image. It gives a robust detector under noise and partial occlusion.</p>

<h3 id="goal-of-hough-transform-for-detecting-lines">Goal of Hough Transform for Detecting Lines</h3>

<p>Hough transform can be used to detect lines in a image. To do this, we want to locate sets of pixels that make up straight lines in the image. This works to detect lines in an image after an edge detector is applied to get the pixels of just the edges.</p>

<h3 id="detecting-lines-using-hough-transform-in-a-b-space">Detecting Lines Using Hough Transform in \(a, b\) Space</h3>

<p>Say we have a \((x_i, y_i)\). There are infinite lines that could pass through this point. We can define a line that passes through this pixel \((x_i, y_i)\) as \(y_i = ax_i + b.\) Using this, we can transform each pixel into \(a,b\) space by rewriting this equation as: \(b = -ax_i + y_i\).</p>

<p>This equation represents a line in \(a,b\) space, and each \(a,b\) point on the line represents a possible line in \(x,y\) space passing through our point \(x_i,y_i\). Thus, for each pixel \(x_i,y_i\) in our set of edge pixels, we transform it into \(a,b\) space to get a line.</p>

<div align="center">
<figure>
<img src="../../../pictures/hough-transform-a-b-space.png" alt="hough transform: from (x,y) space to (a,b) space" style="zoom:50%;" />
<figcaption style="font-size: 80%;"> Figure. The transformation from the
original (x,y) space to (a,b) space. (<a href="https://github.com/StanfordVL/cs131_notes/blob/master/lecture06/lecture06.pdf">Source</a>) </figcaption>
</figure>
</div>

<p>An arbitrary point \((x_i,y_i)\) in \(x,y\) space correspond to a line \(b = -ax_i + y_i\) in \(a,b\) space, and any line \(y=a_ix+b_i\) in \(x,y\) space correspond to a point \((a_i,b_i)\) in \(a,b\) space.</p>

<p>The intersection of lines in \(a,b\) space represent the \(a,b\) values that compromise a line \(y_i = ax_i + b\) passing through those points.</p>

<p>Example: Say we have two points \(x_1,y_1 = (0,1)\), and \(x_2,y_2 = (1,2)\). We transform these points into \(a,b\) space with the lines \(b = 0 \times a + 1\) and \(b = -1 \times a + 2\). Solving for the intersection of these two lines gives us \(a=1\) and \(b=1\). This intersection point in \((a,b)\) space gives us the values for the line that goes through both points in \(x,y\) space: \(y=1 \times x + 1\).</p>

<h3 id="hough-transform-in-rho-theta-space">Hough Transform in \(\rho, \theta\) Space</h3>

<p>A problem with using \(a,b\) space to represent lines is that they are limited and cannot represent vertical lines. To solve this, we use polar coordinates to represent lines.</p>

<p>We can define a line that passes through this pixel \((x_i, y_i)\) as \(\rho = x_i\cos\theta + y_i\sin\theta\), where \(\rho\) is the perpendicular distance from the origin to the line, and \(\theta\) is the angle formed by this perpendicular line and the axis. Using this, we can transform each pixel \((x_i,y_i)\) into \(\rho, \theta\) space by \(\rho = x_i\cos\theta + y_i\sin\theta\).</p>

<p>In \(\rho, \theta\) space, points are not represented as lines but instead as sine wave-like functions. A curve \(\rho = x_i\cos\theta + y_i\sin\theta\) in \(\rho, \theta\) space represents all straight lines that cross the point \((x_i, y_i)\) in \(x, y\) space.</p>

<div align="center">
<figure>
<img src="../../../pictures/hough-transform-rho-theta-space.png" alt="image" style="zoom: 70%;" />
<figcaption style="font-size: 80%;"> Figure. The transformation from the
original (x,y) space to (\rho,\theta) space. (<a href="https://github.com/StanfordVL/cs131_notes/blob/master/lecture06/lecture06.pdf">Source</a>) </figcaption>
</figure>
</div>
<p>An arbitrary point \((x_i,y_i)\) in \(x,y\) space correspond to a curve \(\rho = x_i\cos\theta + y_i\sin\theta\) in \(\rho,\theta\) space, and any line \(\rho_i = x\cos\theta_i + y\sin\theta_i\) in \(x,y\) space correspond to a point \((\rho_i,\theta_i)\) in \(\rho,\theta\) space.</p>

<p>The intersection of these curves in \(\rho, \theta\) space still correspond to the \(\rho, \theta\) that comprise a line passing through those points. In the previous figure , the \((\rho, \theta)\) in left plot equals to the \((\rho', \theta')\) in right plot. The straight line in left plot that
crosses points \((x_i, y_i)\) and \((x_j, y_j)\) can be expressed as \(x\cos\theta' + y\sin\theta' = \rho'\) in \(x, y\) space.</p>

<h3 id="accumulator-cells">Accumulator Cells</h3>

<p>For each pixel \(x_i, y_i\) we transform it into a function in \(\rho, \theta\) space. We apply the accumulator cell to count the most intersections (votes) of functions. We quantize our \(\rho, \theta\) space into cells, and add a “vote” to each cell that our function passes through. The cells with the most votes are the most likely real lines in our image. Cells receiving more than a threshold are assumed to correspond to lines in original \(x,y\) space.</p>

<div align="center">
<figure>
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/1c/Hough-example-result-en.png/800px-Hough-example-result-en.png" alt="Hough-example-result-en.png" style="zoom:100%;" />
<figcaption style="font-size: 80%;"> Figure. Hough transform example result. (<a href="https://en.wikipedia.org/wiki/Hough_transform">Source</a>) </figcaption>
</figure>
</div>

<p><strong>Algorithm. Hough transform.</strong></p>

<p>For each edge point \((x_i,y_i)\):</p>

<p>  # Traverse through the curve \(\rho = x_i\cos\theta + y_i\sin\theta\) and vote</p>

<p>  For \(\theta\) in Range(\(-\pi, \pi\)) with the grid size as step size:</p>

<p>    \(\rho = x_i\cos\theta + y_i\sin\theta\)</p>

<p>    \(H(\rho, \theta) \mathrel{+}= 1\) # vote</p>

<p>End</p>

<p>When applying Hough transform in \(\rho, \theta\) space, it is useful to make use of gradient information which is often available as output from an edge detector. For example, if we know the direction of the edge point is \(\theta'\), then this point votes for \(\theta'-\frac{\pi}{8} \sim \theta' + \frac{\pi}{8}\) in \(\rho, \theta\) space. This reduces the computation time and has the effect of reducing the number of useless votes. This modified Hough transform can be expressed as</p>

<p><strong>Algorithm. Modified Hough transform.</strong></p>

<p>For each edge point \((x_i,y_i)\):</p>

<p>  \(\theta'\) = gradient orientation at \((x_i,y_i)\)</p>

<p>  For \(\theta\) in Range(\(\theta'-\frac{\pi}{8}, \theta' + \frac{\pi}{8}\)) with the grid size as step size:</p>

<p>    \(\rho = x_i\cos\theta + y_i\sin\theta\)</p>

<p>    \(H(\rho, \theta) \mathrel{+}= 1\) # voting</p>

<p>End</p>

<h3 id="dealing-with-noise">Dealing with Noise</h3>

<p>Here are several methods to deal with noise in Hough transform.</p>

<p>Choosing a good grid (discretization). If the grids are too coarse, then large votes obtained when too many different lines correspond to a single bucket. Otherwise, if too fine, miss lines because some points that are not exactly collinear cast votes for different buckets.</p>

<p>Increment neighboring bins (smoothing in accumulator array). Trying to get rid of irrelevant features: taking only edge points with significant gradient magnitude.</p>

<h3 id="concluding-remarks">Concluding Remarks</h3>

<p>Advantages of the Hough Transform:</p>

<ul>
  <li>
    <p>It is conceptually simple (just transforming and finding intersection in Hough space), and it is also fairly easy to implement;</p>
  </li>
  <li>
    <p>It can handle missing and occluded data well;</p>
  </li>
  <li>
    <p>It can find other structures other than lines, as long as the structure has a parametric equation;</p>
  </li>
  <li>
    <p>It can fit multiple instances of a model (e.g. there are multiple lines in the image).</p>
  </li>
</ul>

<p>Disadvantages:</p>

<ul>
  <li>
    <p>It gets more computationally complex the more parameters you have;</p>
  </li>
  <li>
    <p>It can also only look for one kind of structure (so not lines and circles together);</p>
  </li>
  <li>
    <p>The length and the position of a line segment can also not be detected by this. It can be fooled by “apparent” lines, and co-linear line segments cannot be separated.</p>
  </li>
</ul>

<p><br /></p>

<p><strong>References:</strong></p>

<p><a href="https://github.com/StanfordVL/cs131_notes/blob/master/lecture06/lecture06.pdf">CS131 - Computer Vision: Lecture 6</a></p>

<p><a href="https://en.wikipedia.org/wiki/Hough_transform">Wikipedia: Hough transform</a></p>


  </div>

  <br> </br>
  <p><font color="grey" size="4"> Comments </font></p>
  <HR color=#D1D0CE SIZE=10>

<div id="disqus_thread"></div>

<script>
/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://walkermao.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


                            

  
</div>

      </section>
    </main><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-178951885-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-178951885-1');
</script>

    
    <div id="back-top">
      <a href="javascript:void(0);" onclick="topFunction()" title="Back to top"> </a>
    </div>

  </body>
</html>

<script src = "/assets/js/scroll_into_view.js"></script>
<script src = "/assets/js/back_to_top.js"></script>