<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="https://kit.fontawesome.com/123ecac47c.js" crossorigin="anonymous"></script><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link href="https://fonts.googleapis.com/css?family=Merriweather:300|Raleway:400,700" rel="stylesheet">
<link rel="stylesheet" href="/assets/css/style.css">
<link rel="shortcut icon" type="image/png" href="/assets/portfolio.png">
<title>Random Sample Consensus (RANSAC)</title>
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Random Sample Consensus (RANSAC) | Weikai’s blog.</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Random Sample Consensus (RANSAC)" />
<meta name="author" content="Weikai Mao" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="As for model fitting, with the increase in model complexity (i.e., the number of parameters), the Hough transform loses its effectiveness since the dimension of Hough space is too high; The RANdom SAmple Consensus (RANSAC) technique provides a computationally efficient means of fitting models in images." />
<meta property="og:description" content="As for model fitting, with the increase in model complexity (i.e., the number of parameters), the Hough transform loses its effectiveness since the dimension of Hough space is too high; The RANdom SAmple Consensus (RANSAC) technique provides a computationally efficient means of fitting models in images." />
<link rel="canonical" href="http://localhost:4000/ransac.html" />
<meta property="og:url" content="http://localhost:4000/ransac.html" />
<meta property="og:site_name" content="Weikai’s blog." />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-03-14T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Random Sample Consensus (RANSAC)" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Weikai Mao"},"dateModified":"2021-03-14T00:00:00+08:00","datePublished":"2021-03-14T00:00:00+08:00","description":"As for model fitting, with the increase in model complexity (i.e., the number of parameters), the Hough transform loses its effectiveness since the dimension of Hough space is too high; The RANdom SAmple Consensus (RANSAC) technique provides a computationally efficient means of fitting models in images.","headline":"Random Sample Consensus (RANSAC)","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/ransac.html"},"url":"http://localhost:4000/ransac.html"}</script>
<!-- End Jekyll SEO tag -->


<meta name="google-site-verification" content="wXp8C1QlYKCpKxfXyFfQXEv9l5fJvcOi53ofYmOcaSA" />
<meta name="msvalidate.01" content="97F0BB32D312B808156DE357EA8474D3" />
<meta name="yandex-verification" content="690106a82d8966ab" />

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[", "\\]"] ],
        processEscapes: true,
        ignoreClass: "tex2jax_ignore|dno"
      }
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>    


  







</head>
  <body>
    <main class="container">
      <section class="about">
        <a href="/" class="iconlink"> 
          <h3> 
            <i class="fas fa-home"></i> HOME 
          </h3> 
        </a>
        <a href="/"> <img src="/assets/portfolio.png" alt="Weikai Mao"></a>
        <h2 id="title"> Weikai Mao </h2>
        <p style="font-size:90%" class="tagline">maoweikai123@outlook.com</p>
        
        <ul class="social"><a href="https://github.com/WalkerMao">
              <li>
                <i class="fab fa-github"></i>
              </li>
            </a><a href="https://www.linkedin.com/in/weikai-mao-000249124">
              <li>
                <i class="fab fa-linkedin"></i>
              </li>
            </a><a href="/wechat-qr-code.html">
              <li>
                <i class="fab fa-weixin"></i>
              </li>
            </a></ul><h3 style="color:gray; font-weight:normal"> Categories: </h3>
            <ul class="post-categories" style="max-width:225px;">
              
                  <a class="post-link" href="/"> <li style="padding: 4px 8px;"> All </li> </a>
              
                  <a class="post-link" href="/categories/cs"> <li style="padding: 4px 8px;"> CS </li> </a>
              
                  <a class="post-link" href="/categories/cv"> <li style="padding: 4px 8px;"> CV </li> </a>
              
                  <a class="post-link" href="/categories/dl"> <li style="padding: 4px 8px;"> DL </li> </a>
              
                  <a class="post-link" href="/categories/fe"> <li style="padding: 4px 8px;"> FE </li> </a>
              
                  <a class="post-link" href="/categories/math"> <li style="padding: 4px 8px;"> Math </li> </a>
              
                  <a class="post-link" href="/categories/ml"> <li style="padding: 4px 8px;"> ML </li> </a>
              
                  <a class="post-link" href="/categories/nlp"> <li style="padding: 4px 8px;"> NLP </li> </a>
              
                  <a class="post-link" href="/categories/stat"> <li style="padding: 4px 8px;"> Stat </li> </a>
              
                  <a class="post-link" href="/categories/杂"> <li style="padding: 4px 8px;"> 杂 </li> </a>
              
            </ul><p>&copy; 2023 </p>

      </section>
      <section class="content">
        <div class="sidebar">
  <ul><li><a href="#basic-idea">Basic Idea</a></li><li><a href="#applications">Applications</a></li><li><a href="#the-algorithm">The Algorithm</a></li><li><a href="#adaptive-ransac">Adaptive RANSAC</a></li><li><a href="#advantages-limitations-and-considerations">Advantages, Limitations, and Considerations</a></li></ul>

</div><div class="post-container" id="viewpoint">
  <a class="post-link" href="/ransac.html">
    <h2 class="post-title">Random Sample Consensus (RANSAC)</h2>
  </a>
  <div class="post-meta">
    <div>
      <ul class="post-categories"><a class="post-link" href="/categories/cv"> <li>CV</li> </a></ul>
      <ul class="post-tags"><a class="post-link" href="/tags/traditional cv"> <li>Traditional CV</li> </a></ul>
    </div>
    <div class="post-date">
      <i class="icon-calendar"></i>
      Mar 14, 2021
    </div>
  </div>
  <div style="line-height:77%;">
    <br>
  </div>
  <div class="post"><p>As for model fitting, with the increase in model complexity (i.e., the number of parameters), the Hough transform loses its effectiveness since the dimension of Hough space is too high; The RANdom SAmple Consensus (RANSAC) technique provides a computationally efficient means of fitting models in images.</p>

<h3 id="basic-idea">Basic Idea</h3>

<p>The RANSAC algorithm is used for estimating the parameters of models in images (i.e., model fitting). The basic idea behind RANSAC is to solve the fitting problem many times using randomly selected minimal subsets of the data and choosing the best performing fit. To achieve this, RANSAC tries to iteratively identify “inliers” and “outliers” in the data points that correspond to model we are trying to fit.</p>

<h3 id="applications">Applications</h3>

<p>The RANSAC algorithm can be used to estimate parameters of different models; this is proven beneficial in image stitching, outlier detection, lane detection (linear model estimation), and stereo camera calculations.</p>

<h3 id="the-algorithm">The Algorithm</h3>

<p>The RANSAC algorithm iteratively samples nominal subsets of the original data (e.g., 2 points for line estimation); the model is fitted to each sample, and the number of “inliers” corresponding to this fit is calculated. The points that are close to the fitted model (closer than a threshold, e.g., 2 standard deviation, or a pre-determined number of pixels) are considered “inliers”. The fitted model is considered good if a big fraction of the data is considered as “inliers” for that fit. After a good fit is found, the model is re-fitted using all the inliers. This process is repeated, and model estimates with a big enough fraction of inliers (e.g., bigger than a pre-specified threshold) are compared to choose the best-performing fit.</p>

<p>The major steps included in the RANSAC loop:</p>

<ol>
  <li>
    <p>Randomly select a seed group of size \(n\) from data;</p>
  </li>
  <li>
    <p>Perform parameter estimation using the selected seed group;</p>
  </li>
  <li>
    <p>Identify the inliers (points close to the estimated model, e.g. distance is smalled than \(t\));</p>
  </li>
  <li>
    <p>If there exists a sufficiently large number of inliers (larger than \(d\)), re-estimate the model using all inliers;</p>
  </li>
  <li>
    <p>Repeat steps 1-4 and finally keep the estimate with most inliers and best fit.</p>
  </li>
</ol>

<div align="center">
<figure>
<img src="../../../pictures/Demonstration-of-RANSAC.png" alt="Demonstration-of-RANSAC" style="zoom: 50%;" />
<figcaption style="font-size: 80%;"> Figure. The demonstration of the RANSAC algorithm for a linear model estimation. (<a href="https://www.researchgate.net/figure/Visual-representation-of-the-functioning-of-RANSAC-Subset-1-and-2-represent-two-RANSAC_fig3_274678977">Source</a>) </figcaption>
</figure>
</div>

<h3 id="adaptive-ransac">Adaptive RANSAC</h3>

<p>The RANSAC is a non-deterministic model fitting approach; this means that the number of samples need to be large enough to provide a high confidence estimate of parameters. The number of required samples depends on 1) the number of fitted parameters and 2) the amount of noise. More samples are needed for estimating bigger models and noisier data.</p>

<p>But how large is large enough? A large enough number of samples ($k$) need to be chosen such that a high confidence probability \(p\) (e.g. \(p=0.99\)) of at least one random sample is free from outliers is guaranteed:</p>

\[p=1-(1-W^n)^k,\]

<p>where $W$ and $n$ are respectively the fraction of inliers, and the number of points needed for model fitting.</p>

<p>Then the minimum number of samples is
\(k=\frac{\log(1-p)}{\log(1-W^n)}\)</p>

<p>In practice, the fraction of inliers is usually unknown, and it can be estimated during the iterations of RANSAC. Thus the number of samples can also be determined adaptively during the iterations.</p>

<p><strong>Algorithm. Adaptive procedure of RANSAC.</strong></p>

<p>Set confidence probability \(p\) (e.g. \(p=0.99\));</p>

<p>Initialize sample count $c=0$, minimum number of samples $k=\infty$;</p>

<p>Initialize number of sampled points $NSP = 0$, number of inliers in the sampled points $NI = 0$;</p>

<p>While $c &lt; k$:</p>

<p>  Choose a sample of size \(n\);</p>

<p>  Count the number of inliers in this sample \(\text{ni}\);</p>

<p>  $NSP \mathrel{+}= n$;</p>

<p>  $NI \mathrel{+}= \text{ni}$;</p>

<p>  Set fraction of inliers $W = \frac{NI}{NSP}$;</p>

<p>  Recompute $k$ from the new $W$ as $k=\frac{\log(1-p)}{\log(1-W^n)}$;</p>

<p>  $c \mathrel{+}= 1$;</p>

<p>End</p>

<h3 id="advantages-limitations-and-considerations">Advantages, Limitations, and Considerations</h3>

<p>Advantages of RANSAC:</p>

<ul>
  <li>Simple implementation and wide application range in the model fitting domain;</li>
  <li>Computational efficiency;</li>
  <li>The sampling approach provides a better alternative to solving the problem for all possible combinations of features.</li>
</ul>

<p>Disvantages:</p>

<ul>
  <li>Only works well when you want to detect a single instance of a model (e.g. there is only a single line in image);</li>
  <li>Poor performance in highly noisy data (high ratio of outliers).</li>
</ul>

<p>In some cases, it’d be more efficient to use the Hough transform instead of the RANSAC:</p>

<ol>
  <li>
    <p>The number of parameters are small; for example, linear model estimation (2 parameters) can be achieved efficiently using Hough transform, while image stitching requires a more computationally frugal approach such as RANSAC.</p>
  </li>
  <li>
    <p>If the noise ratio is high; as we saw earlier, increase in noise requires a more extensive sampling approach (higher number of samples), increasing computation cost. Increased noise reduces the chances of correct parameter estimation and the accuracy of inlier classification.</p>
  </li>
</ol>

<p><br /></p>

<p><strong>References:</strong></p>


  </div>

  <br> </br>
  <p><font color="grey" size="4"> Comments </font></p>
  <HR color=#D1D0CE SIZE=10>

<div id="disqus_thread"></div>

<script>
/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://walkermao.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


                            

  
</div>

      </section>
    </main><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-178951885-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-178951885-1');
</script>

    
    <div id="back-top">
      <a href="javascript:void(0);" onclick="topFunction()" title="Back to top"> </a>
    </div>

  </body>
</html>

<script src = "/assets/js/scroll_into_view.js"></script>
<script src = "/assets/js/back_to_top.js"></script>